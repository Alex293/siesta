<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Resource Class Reference</title>
    <link rel="stylesheet" type="text/css" href="../css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="../css/highlight.css" />
    <meta charset='utf-8'>
    <script src="../js/jquery.min.js" defer></script>
    <script src="../js/jazzy.js" defer></script>
  </head>
  <body>
    <a name="//apple_ref/swift/Class/Resource" class="dashAnchor"></a>
    <a title="Resource Class Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="../index.html">Siesta Docs</a> (89% documented)</p>
        <p class="header-right"><a href="https://github.com/bustoutsolutions/siesta"><img src="../img/gh.png"/>View on GitHub</a></p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="../index.html">Siesta Reference</a>
        <img id="carat" src="../img/carat.png" />
        Resource Class Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
          <a href="../Resources.html">Resources</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Classes/Service.html">Service</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/Resource.html">Resource</a>
              </li>
              <li class="nav-group-task">
                <a href="../Structs/Entity.html">Entity</a>
              </li>
              <li class="nav-group-task">
                <a href="../Structs/Error.html">Error</a>
              </li>
              <li class="nav-group-task">
                <a href="../Structs/Configuration.html">Configuration</a>
              </li>
              <li class="nav-group-task">
                <a href="../Protocols/TypedContentAccessors.html">TypedContentAccessors</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
          <a href="../Observering Resources.html">Observering Resources</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Protocols/ResourceObserver.html">ResourceObserver</a>
              </li>
              <li class="nav-group-task">
                <a href="../Observering Resources.html#/s:6Siesta23ResourceObserverClosure">ResourceObserverClosure</a>
              </li>
              <li class="nav-group-task">
                <a href="../Enums/ResourceEvent.html">ResourceEvent</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
          <a href="../Requests.html">Requests</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Protocols/Request.html">Request</a>
              </li>
              <li class="nav-group-task">
                <a href="../Enums/RequestMethod.html">RequestMethod</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
          <a href="../Response Parsing.html">Response Parsing</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Enums/Response.html">Response</a>
              </li>
              <li class="nav-group-task">
                <a href="../Protocols/ResponseTransformer.html">ResponseTransformer</a>
              </li>
              <li class="nav-group-task">
                <a href="../Protocols/ResponseEntityTransformer.html">ResponseEntityTransformer</a>
              </li>
              <li class="nav-group-task">
                <a href="../Response Parsing.html#/s:V6Siesta23TextResponseTransformer">TextResponseTransformer</a>
              </li>
              <li class="nav-group-task">
                <a href="../Response Parsing.html#/s:V6Siesta23JSONResponseTransformer">JSONResponseTransformer</a>
              </li>
              <li class="nav-group-task">
                <a href="../Response Parsing.html#/s:V6Siesta24ImageResponseTransformer">ImageResponseTransformer</a>
              </li>
              <li class="nav-group-task">
                <a href="../Structs/TransformerSequence.html">TransformerSequence</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
          <a href="../UI Helpers.html">UI Helpers</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Classes/ResourceStatusOverlay.html">ResourceStatusOverlay</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/RemoteImageView.html">RemoteImageView</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
          <a href="../Network Layer.html">Network Layer</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Protocols/NetworkingProvider.html">NetworkingProvider</a>
              </li>
              <li class="nav-group-task">
                <a href="../Protocols/NetworkingProviderConvertible.html">NetworkingProviderConvertible</a>
              </li>
              <li class="nav-group-task">
                <a href="../Protocols/RequestNetworking.html">RequestNetworking</a>
              </li>
              <li class="nav-group-task">
                <a href="../Network Layer.html#/s:6Siesta35RequestNetworkingCompletionCallback">RequestNetworkingCompletionCallback</a>
              </li>
              <li class="nav-group-task">
                <a href="../Structs/NSURLSessionProvider.html">NSURLSessionProvider</a>
              </li>
              <li class="nav-group-task">
                <a href="../Structs/AlamofireProvider.html">AlamofireProvider</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
          <a href="../Caching.html">Caching</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Protocols/EntityCache.html">EntityCache</a>
              </li>
              <li class="nav-group-task">
                <a href="../Protocols/EntityEncoder.html">EntityEncoder</a>
              </li>
              <li class="nav-group-task">
                <a href="../Structs/JSONEntityEncoder.html">JSONEntityEncoder</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
          <a href="../Logging.html">Logging</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Logging.html#/s:v6Siesta20enabledLogCategoriesGVSs3SetOS_11LogCategory_">enabledLogCategories</a>
              </li>
              <li class="nav-group-task">
                <a href="../Enums/LogCategory.html">LogCategory</a>
              </li>
              <li class="nav-group-task">
                <a href="../Logging.html#/s:v6Siesta6loggerFTOS_11LogCategorySS_T_">logger</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
          <a href="../Other Extensions.html">Other Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Extensions/Alamofire.html">Alamofire</a>
              </li>
              <li class="nav-group-task">
                <a href="../Extensions/NSURLSession.html">NSURLSession</a>
              </li>
              <li class="nav-group-task">
                <a href="../Extensions/NSURLSessionConfiguration.html">NSURLSessionConfiguration</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
          <a href="../Other Protocols.html">Other Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Other Protocols.html#/s:P6Siesta17NSJSONConvertible">NSJSONConvertible</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            <h1>Resource</h1>
              <div class="declaration">
                <div class="Swift">
                  <p class="aside-title">Swift</p>
                  <pre class="highlight"><code><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="kt">Resource</span><span class="p">:</span> <span class="kt">NSObject</span></code></pre>

                </div>
              </div>
            <p>An in-memory cache of a RESTful resource, plus information about the status of network requests related to it.</p>

<p>This class answers three basic questions about a resource:</p>

<ul>
<li>What is the latest data for the resource this device has retrieved, if any?</li>
<li>Did the last attempt to load it result in an error?</li>
<li>Is there a request in progress?</li>
</ul>

<p>…and allows multiple observer to register to be notified whenever the answers to any of these
questions changes.</p>

          </section>
          <section class="section task-group-section">
            <div class="task-group">
                <div class="task-name-container">
                  <a name="/Configuration"></a>
                  <a name="//apple_ref/swift/Section/Configuration" class="dashAnchor"></a>
                  <a href="#/Configuration">
                    <h3 class="section-name">Configuration</h3>
                  </a>
                </div>
              <ul>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:vC6Siesta8Resource7serviceCS_7Service"></a>
                    <a name="//apple_ref/swift/Property/service" class="dashAnchor"></a>
                    <a class="token" href="#/s:vC6Siesta8Resource7serviceCS_7Service">service</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>The API to which this resource belongs. Provides configuration defaults and instance uniqueness.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="Swift">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="k">let</span> <span class="nv">service</span><span class="p">:</span> <span class="kt">Service</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:vC6Siesta8Resource3urlCSo5NSURL"></a>
                    <a name="//apple_ref/swift/Property/url" class="dashAnchor"></a>
                    <a class="token" href="#/s:vC6Siesta8Resource3urlCSo5NSURL">url</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>The canoncial URL of this resource.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="Swift">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="k">let</span> <span class="nv">url</span><span class="p">:</span> <span class="kt">NSURL</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
                <div class="task-name-container">
                  <a name="/Configuration2"></a>
                  <a name="//apple_ref/swift/Section/Configuration" class="dashAnchor"></a>
                  <a href="#/Configuration2">
                    <h3 class="section-name">Configuration</h3>
                  </a>
                </div>
              <ul>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:vC6Siesta8Resource6configVS_13Configuration"></a>
                    <a name="//apple_ref/swift/Property/config" class="dashAnchor"></a>
                    <a class="token" href="#/s:vC6Siesta8Resource6configVS_13Configuration">config</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Configuration options for this resource.</p>

<p>Note that this is a read-only computed property. You cannot directly change an individual resource&rsquo;s configuration.
The reason for this is that resource instances are created on demand, and can disappear under memory pressure when
not in use. Any configuration applied a particular resource instance would therefore be transient.</p>

<p>Instead, you must use the <code>Service.configure(...)</code> methods. This sets up configuration to be applied to resources
according to their URL, whenever they are created or recreated.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="Swift">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="k">var</span> <span class="nv">config</span><span class="p">:</span> <span class="kt">Configuration</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
                <div class="task-name-container">
                  <a name="/Resource%20state"></a>
                  <a name="//apple_ref/swift/Section/Resource state" class="dashAnchor"></a>
                  <a href="#/Resource%20state">
                    <h3 class="section-name">Resource state</h3>
                  </a>
                </div>
              <ul>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:vC6Siesta8Resource10latestDataGSqVS_6Entity_"></a>
                    <a name="//apple_ref/swift/Property/latestData" class="dashAnchor"></a>
                    <a class="token" href="#/s:vC6Siesta8Resource10latestDataGSqVS_6Entity_">latestData</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>The latest valid data we have for this resource. May come from a server response, a cache,
or a local override.</p>

<p>Note that this property represents the <strong>full state</strong> of the resource. It therefore only holds entities fetched
with <code>load()</code> and <code>loadIfNeeded()</code>, not any of the various flavors of <code>request(...)</code>.</p>

<p>Note that <code>latestData</code> will be present as long as there has <em>ever</em> been a succesful request since the resource
was created or wiped. If an error occurs, <code>latestData</code> will still hold the latest (now stale) valid data.</p>

<ul>
<li>SeeAlso: <code>DataContainer</code></li>
</ul>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="Swift">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">private(set)</span> <span class="k">var</span> <span class="nv">latestData</span><span class="p">:</span> <span class="kt">Entity</span><span class="p">?</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:vC6Siesta8Resource11latestErrorGSqVS_5Error_"></a>
                    <a name="//apple_ref/swift/Property/latestError" class="dashAnchor"></a>
                    <a class="token" href="#/s:vC6Siesta8Resource11latestErrorGSqVS_5Error_">latestError</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Details if the last attempt to load this resource resulted in an error. Becomes nil as soon
as a request is successful.</p>

<p>Note that this only reports error from <code>load()</code> and <code>loadIfNeeded()</code>, not any of the various
flavors of <code>request(...)</code>.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="Swift">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">private(set)</span> <span class="k">var</span> <span class="nv">latestError</span><span class="p">:</span> <span class="kt">Error</span><span class="p">?</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:vC6Siesta8Resource9timestampSd"></a>
                    <a name="//apple_ref/swift/Property/timestamp" class="dashAnchor"></a>
                    <a class="token" href="#/s:vC6Siesta8Resource9timestampSd">timestamp</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>The time of the most recent update to either <code>latestData</code> or <code>latestError</code>.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="Swift">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="k">var</span> <span class="nv">timestamp</span><span class="p">:</span> <span class="kt">NSTimeInterval</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
                <div class="task-name-container">
                  <a name="/Request%20management"></a>
                  <a name="//apple_ref/swift/Section/Request management" class="dashAnchor"></a>
                  <a href="#/Request%20management">
                    <h3 class="section-name">Request management</h3>
                  </a>
                </div>
              <ul>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:vC6Siesta8Resource7loadingSb"></a>
                    <a name="//apple_ref/swift/Property/loading" class="dashAnchor"></a>
                    <a class="token" href="#/s:vC6Siesta8Resource7loadingSb">loading</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>True if any load requests  (i.e. from calls to <code>load(...)</code> and <code>loadIfNeeded()</code>)
for this resource are in progress.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="Swift">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="k">var</span> <span class="nv">loading</span><span class="p">:</span> <span class="kt">Bool</span> <span class="p">{</span> <span class="k">return</span> <span class="o">!</span><span class="n">loadRequests</span><span class="o">.</span><span class="n">isEmpty</span> <span class="p">}</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:vC6Siesta8Resource10requestingSb"></a>
                    <a name="//apple_ref/swift/Property/requesting" class="dashAnchor"></a>
                    <a class="token" href="#/s:vC6Siesta8Resource10requestingSb">requesting</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>True if any requests for this resource are in progress.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="Swift">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="k">var</span> <span class="nv">requesting</span><span class="p">:</span> <span class="kt">Bool</span> <span class="p">{</span> <span class="k">return</span> <span class="o">!</span><span class="n">allRequests</span><span class="o">.</span><span class="n">isEmpty</span> <span class="p">}</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:vC6Siesta8Resource12loadRequestsGSaPS_7Request__"></a>
                    <a name="//apple_ref/swift/Property/loadRequests" class="dashAnchor"></a>
                    <a class="token" href="#/s:vC6Siesta8Resource12loadRequestsGSaPS_7Request__">loadRequests</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>All load requests in progress, in the order they were initiated.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="Swift">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">private(set)</span> <span class="k">var</span> <span class="nv">loadRequests</span> <span class="o">=</span> <span class="p">[</span><span class="kt">Request</span><span class="p">]()</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:vC6Siesta8Resource11allRequestsGSaPS_7Request__"></a>
                    <a name="//apple_ref/swift/Property/allRequests" class="dashAnchor"></a>
                    <a class="token" href="#/s:vC6Siesta8Resource11allRequestsGSaPS_7Request__">allRequests</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>All requests in progress related to this resource, in the order they were initiated.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="Swift">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">private(set)</span> <span class="k">var</span> <span class="nv">allRequests</span> <span class="o">=</span> <span class="p">[</span><span class="kt">Request</span><span class="p">]()</span>  <span class="c1">// TOOD: Any special handling for concurrent POST &amp; GET?</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
                <div class="task-name-container">
                  <a name="/URL%20navigation"></a>
                  <a name="//apple_ref/swift/Section/URL navigation" class="dashAnchor"></a>
                  <a href="#/URL%20navigation">
                    <h3 class="section-name">URL navigation</h3>
                  </a>
                </div>
              <ul>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:FC6Siesta8Resource5childFS0_FSSS0_"></a>
                    <a name="//apple_ref/swift/Method/child(_:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:FC6Siesta8Resource5childFS0_FSSS0_">child(_:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Returns the resource with the given string appended to the path of this resource’s URL, with a joining slash
inserted if necessary.</p>

<p>Use this method for hierarchical resource navigation. The typical use case is constructing a resource URL from
path components and IDs:</p>

<pre class="highlight plaintext"><code>let resource = service.resource("/widgets")
resource.child("123").child("details")
  //→ /widgets/123/details
</code></pre>

<p>This method <em>always</em> returns a subpath of the receiving resource. It does not apply any special
interpretation to strings such <code>./</code>, <code>//</code> or <code>?</code> that have significance in other URL-related
situations. Special characters are escaped when necessary, and otherwise ignored. See
<a href="https://bustoutsolutions.github.io/siesta/specs/#ResourcePathsSpec"><code>ResourcePathsSpec</code></a>
for details.</p>

<ul>
<li>SeeAlso: <code>relative(_:)</code></li>
</ul>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="Swift">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">child</span><span class="p">(</span><span class="nv">subpath</span><span class="p">:</span> <span class="kt">String</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Resource</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:FC6Siesta8Resource8relativeFS0_FSSS0_"></a>
                    <a name="//apple_ref/swift/Method/relative(_:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:FC6Siesta8Resource8relativeFS0_FSSS0_">relative(_:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Returns the resource with the given URL, using this resource’s URL as the base if it is a relative URL.</p>

<p>This method interprets strings such as <code>.</code>, <code>..</code>, and a leading <code>/</code> or <code>//</code> as relative URLs. It resolves its
  parameter much like an <code>href</code> attribute in an HTML document. Refer to
  <a href="https://bustoutsolutions.github.io/siesta/specs/#ResourcePathsSpec"><code>ResourcePathsSpec</code></a>
  for details.</p>

<ul>
<li>SeeAlso:

<ul>
<li><code>optionalRelative(_:)</code></li>
<li><code>child(_:)</code></li>
</ul></li>
</ul>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="Swift">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">relative</span><span class="p">(</span><span class="nv">href</span><span class="p">:</span> <span class="kt">String</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Resource</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:FC6Siesta8Resource16optionalRelativeFS0_FGSqSS_GSqS0__"></a>
                    <a name="//apple_ref/swift/Method/optionalRelative(_:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:FC6Siesta8Resource16optionalRelativeFS0_FGSqSS_GSqS0__">optionalRelative(_:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Returns <code>relative(href)</code> if <code>href</code> is present, and nil if <code>href</code> is nil.</p>

<p>This convenience method is useful for resolving URLs returned as part of a JSON response body:</p>

<pre class="highlight plaintext"><code>  let href = resource.jsonDict["owner"] as? String  // href is an optional
  if let ownerResource = resource.optionalRelative(href) {
    // ...
  }
</code></pre>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="Swift">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">optionalRelative</span><span class="p">(</span><span class="nv">href</span><span class="p">:</span> <span class="kt">String</span><span class="p">?)</span> <span class="o">-&gt;</span> <span class="kt">Resource</span><span class="p">?</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:FC6Siesta8Resource9withParamFS0_FTSSGSqSS__S0_"></a>
                    <a name="//apple_ref/swift/Method/withParam(_:_:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:FC6Siesta8Resource9withParamFS0_FTSSGSqSS__S0_">withParam(_:_:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Returns this resource with the given parameter added or changed in the query string.</p>

<p>If <code>value</code> is an empty string, the parameter goes in the query string with no value (e.g. <code>?foo</code>).
  If <code>value</code> is nil, the parameter is removed.</p>

<p>There is no support for parameters with an equal sign but an empty value (e.g. <code>?foo=</code>).
  There is also no support for repeated keys in the query string (e.g. <code>?foo=1&amp;foo=2</code>).
  If you need to circumvent either of these restrictions, you can create the query string yourself and pass
  it to <code>relative(_:)</code> instead of using <code>withParam(_:_:)</code>.</p>

<p>Note that <code>Service</code> gives out unique <code>Resource</code> instances according to the full URL in string form, and thus
  considers query string parameter order significant. Therefore, to ensure that you get the same <code>Resource</code>
  instance no matter the order in which you specify parameters, <code>withParam(_:_:)</code> sorts all parameters by name.
  Note that <em>only</em> <code>withParam(_:_:)</code> does this sorting; if you use other methods to create query strings, it is
  up to you to canonicalize your parameter order.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="Swift">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">withParam</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span> <span class="kt">String</span><span class="p">,</span> <span class="n">_</span> <span class="nv">value</span><span class="p">:</span> <span class="kt">String</span><span class="p">?)</span> <span class="o">-&gt;</span> <span class="kt">Resource</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
                <div class="task-name-container">
                  <a name="/Requests"></a>
                  <a name="//apple_ref/swift/Section/Requests" class="dashAnchor"></a>
                  <a href="#/Requests">
                    <h3 class="section-name">Requests</h3>
                  </a>
                </div>
              <ul>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:FC6Siesta8Resource7requestFS0_FTOS_13RequestMethod15requestMutationFCSo19NSMutableURLRequestT__PS_7Request_"></a>
                    <a name="//apple_ref/swift/Method/request(_:requestMutation:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:FC6Siesta8Resource7requestFS0_FTOS_13RequestMethod15requestMutationFCSo19NSMutableURLRequestT__PS_7Request_">request(_:requestMutation:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Initiates a network request for the given resource.</p>

<p>Handle the result of the request by attaching response handlers:</p>

<pre class="highlight plaintext"><code>  resource.request(.GET)
      .success { ... }
      .failure { ... }
</code></pre>

<p>See <code>Request</code> for a complete list of hooks.</p>

<p>Note that, unlike load() and loadIfNeeded(), this method does <em>not</em> update latestData or latestError,
  and does not notify resource observers about the result.</p>

<ul>
<li>Parameter method: The HTTP verb to use for the request</li>
<li><p>Parameter requestMutation:
  An optional callback to change details of the request before it is sent. For example:</p>
<pre class="highlight plaintext"><code>  request(.POST) { nsreq in
    nsreq.HTTPBody = imageData
    nsreq.addValue(
      "image/png",
      forHTTPHeaderField:
        "Content-Type")
  }
</code></pre>

<p>Does nothing by default.</p></li>
<li><p>SeeAlso:</p>

<ul>
<li><code>load()</code></li>
<li><code>loadIfNeeded()</code></li>
</ul></li>
<li><p>SeeAlso:</p>

<ul>
<li><code>request(_:data:contentType:requestMutation:)</code></li>
<li><code>request(_:text:encoding:requestMutation:)</code></li>
<li><code>request(_:json:requestMutation:)</code></li>
<li><code>request(_:urlEncoded:requestMutation:)</code></li>
</ul></li>
</ul>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="Swift">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">request</span><span class="p">(</span>
            <span class="nv">method</span><span class="p">:</span>          <span class="kt">RequestMethod</span><span class="p">,</span>
            <span class="nv">requestMutation</span><span class="p">:</span> <span class="kt">NSMutableURLRequest</span> <span class="o">-&gt;</span> <span class="p">()</span> <span class="o">=</span> <span class="p">{</span> <span class="n">_</span> <span class="k">in</span> <span class="p">})</span>
        <span class="o">-&gt;</span> <span class="kt">Request</span></code></pre>

                        </div>
                      </div>
                      <div>
                        <h4>Parameters</h4>
                        <table class="graybox">
                          <tbody>
                            <tr>
                              <td>
                                <code>
                                <em>method</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>The HTTP verb to use for the request</p>

                                </div>
                              </td>
                            </tr>
                            <tr>
                              <td>
                                <code>
                                <em>requestMutation</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>An optional callback to change details of the request before it is sent. For example:</p>
<pre class="highlight plaintext"><code></code></pre>
<p>Does nothing by default.</p>

                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:FC6Siesta8Resource7requestFS0_FTOS_13RequestMethod4dataCSo6NSData11contentTypeSS15requestMutationFCSo19NSMutableURLRequestT__PS_7Request_"></a>
                    <a name="//apple_ref/swift/Method/request(_:data:contentType:requestMutation:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:FC6Siesta8Resource7requestFS0_FTOS_13RequestMethod4dataCSo6NSData11contentTypeSS15requestMutationFCSo19NSMutableURLRequestT__PS_7Request_">request(_:data:contentType:requestMutation:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Convenience method to initiate a request with a body.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="Swift">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">request</span><span class="p">(</span>
            <span class="nv">method</span><span class="p">:</span>          <span class="kt">RequestMethod</span><span class="p">,</span>
            <span class="nv">data</span><span class="p">:</span>            <span class="kt">NSData</span><span class="p">,</span>
            <span class="nv">contentType</span><span class="p">:</span>     <span class="kt">String</span><span class="p">,</span>
            <span class="nv">requestMutation</span><span class="p">:</span> <span class="kt">NSMutableURLRequest</span> <span class="o">-&gt;</span> <span class="p">()</span> <span class="o">=</span> <span class="p">{</span> <span class="n">_</span> <span class="k">in</span> <span class="p">})</span>
        <span class="o">-&gt;</span> <span class="kt">Request</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:FC6Siesta8Resource7requestFS0_FTOS_13RequestMethod4textSS11contentTypeSS8encodingSu15requestMutationFCSo19NSMutableURLRequestT__PS_7Request_"></a>
                    <a name="//apple_ref/swift/Method/request(_:text:contentType:encoding:requestMutation:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:FC6Siesta8Resource7requestFS0_FTOS_13RequestMethod4textSS11contentTypeSS8encodingSu15requestMutationFCSo19NSMutableURLRequestT__PS_7Request_">request(_:text:contentType:encoding:requestMutation:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Convenience method to initiate a request with a text body.</p>

<p>If the string cannot be encoded using the given encoding, this methods triggers the <code>failure(_:)</code> request hook
  immediately, without touching the network.</p>

<ul>
<li>Parameter contentType: <code>text/plain</code> by default.</li>
<li>Parameter encoding: UTF-8 (<code>NSUTF8StringEncoding</code>) by default.</li>
</ul>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="Swift">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">request</span><span class="p">(</span>
            <span class="nv">method</span><span class="p">:</span>          <span class="kt">RequestMethod</span><span class="p">,</span>
            <span class="nv">text</span><span class="p">:</span>            <span class="kt">String</span><span class="p">,</span>
            <span class="nv">contentType</span><span class="p">:</span>     <span class="kt">String</span> <span class="o">=</span> <span class="s">"text/plain"</span><span class="p">,</span>
            <span class="nv">encoding</span><span class="p">:</span>        <span class="kt">NSStringEncoding</span> <span class="o">=</span> <span class="kt">NSUTF8StringEncoding</span><span class="p">,</span>
            <span class="nv">requestMutation</span><span class="p">:</span> <span class="kt">NSMutableURLRequest</span> <span class="o">-&gt;</span> <span class="p">()</span> <span class="o">=</span> <span class="p">{</span> <span class="n">_</span> <span class="k">in</span> <span class="p">})</span>
        <span class="o">-&gt;</span> <span class="kt">Request</span></code></pre>

                        </div>
                      </div>
                      <div>
                        <h4>Parameters</h4>
                        <table class="graybox">
                          <tbody>
                            <tr>
                              <td>
                                <code>
                                <em>contentType</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p><code>text/plain</code> by default.</p>

                                </div>
                              </td>
                            </tr>
                            <tr>
                              <td>
                                <code>
                                <em>encoding</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>UTF-8 (<code>NSUTF8StringEncoding</code>) by default.</p>

                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:FC6Siesta8Resource7requestFS0_FTOS_13RequestMethod4jsonPS_17NSJSONConvertible_11contentTypeSS15requestMutationFCSo19NSMutableURLRequestT__PS_7Request_"></a>
                    <a name="//apple_ref/swift/Method/request(_:json:contentType:requestMutation:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:FC6Siesta8Resource7requestFS0_FTOS_13RequestMethod4jsonPS_17NSJSONConvertible_11contentTypeSS15requestMutationFCSo19NSMutableURLRequestT__PS_7Request_">request(_:json:contentType:requestMutation:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Convenience method to initiate a request with a JSON body.</p>

<p>If the <code>json</code> cannot be encoded as JSON, e.g. if it is a dictionary with non-JSON-convertible data, this methods
  triggers the <code>failure(_:)</code> request hook immediately, without touching the network.</p>

<ul>
<li>Parameter contentType: <code>application/json</code> by default.</li>
</ul>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="Swift">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">request</span><span class="p">(</span>
            <span class="nv">method</span><span class="p">:</span>          <span class="kt">RequestMethod</span><span class="p">,</span>
            <span class="nv">json</span><span class="p">:</span>            <span class="kt">NSJSONConvertible</span><span class="p">,</span>
            <span class="nv">contentType</span><span class="p">:</span>     <span class="kt">String</span> <span class="o">=</span> <span class="s">"application/json"</span><span class="p">,</span>
            <span class="nv">requestMutation</span><span class="p">:</span> <span class="kt">NSMutableURLRequest</span> <span class="o">-&gt;</span> <span class="p">()</span> <span class="o">=</span> <span class="p">{</span> <span class="n">_</span> <span class="k">in</span> <span class="p">})</span>
        <span class="o">-&gt;</span> <span class="kt">Request</span></code></pre>

                        </div>
                      </div>
                      <div>
                        <h4>Parameters</h4>
                        <table class="graybox">
                          <tbody>
                            <tr>
                              <td>
                                <code>
                                <em>contentType</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p><code>application/json</code> by default.</p>

                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:FC6Siesta8Resource7requestFS0_FTOS_13RequestMethod10urlEncodedGVSs10DictionarySSSS_15requestMutationFCSo19NSMutableURLRequestT__PS_7Request_"></a>
                    <a name="//apple_ref/swift/Method/request(_:urlEncoded:requestMutation:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:FC6Siesta8Resource7requestFS0_FTOS_13RequestMethod10urlEncodedGVSs10DictionarySSSS_15requestMutationFCSo19NSMutableURLRequestT__PS_7Request_">request(_:urlEncoded:requestMutation:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Convenience method to initiate a request with URL-encoded parameters in the meesage body.</p>

<p>This method performs all necessary escaping, and has full Unicode support in both keys and values.</p>

<p>The content type is <code>application/x-www-form-urlencoded</code>.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="Swift">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">request</span><span class="p">(</span>
            <span class="nv">method</span><span class="p">:</span>            <span class="kt">RequestMethod</span><span class="p">,</span>
            <span class="n">urlEncoded</span> <span class="nv">params</span><span class="p">:</span> <span class="p">[</span><span class="kt">String</span><span class="p">:</span><span class="kt">String</span><span class="p">],</span>
            <span class="nv">requestMutation</span><span class="p">:</span>   <span class="kt">NSMutableURLRequest</span> <span class="o">-&gt;</span> <span class="p">()</span> <span class="o">=</span> <span class="p">{</span> <span class="n">_</span> <span class="k">in</span> <span class="p">})</span>
        <span class="o">-&gt;</span> <span class="kt">Request</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:vC6Siesta8Resource10isUpToDateSb"></a>
                    <a name="//apple_ref/swift/Property/isUpToDate" class="dashAnchor"></a>
                    <a class="token" href="#/s:vC6Siesta8Resource10isUpToDateSb">isUpToDate</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>True if the resource’s local state is up to date according to staleness configuration.</p>

<p>“Up to date” means that either:</p>

<ul>
<li>the resource has data (i.e. <code>latestData</code> is not nil),</li>
<li>the last request succeeded (i.e. <code>latestError</code> <em>is</em> nil), and</li>
<li>the timestamp on <code>latestData</code> is more recent than <code>expirationTime</code> seconds ago,</li>
</ul>

<p>…or:</p>

<ul>
<li>the last request failed (i.e. <code>latestError</code> is not nil), and</li>
<li>the timestamp on <code>latestError</code> is more recent than <code>retryTime</code> seconds ago.</li>
</ul>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="Swift">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="k">var</span> <span class="nv">isUpToDate</span><span class="p">:</span> <span class="kt">Bool</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:FC6Siesta8Resource12loadIfNeededFS0_FT_GSqPS_7Request__"></a>
                    <a name="//apple_ref/swift/Method/loadIfNeeded()" class="dashAnchor"></a>
                    <a class="token" href="#/s:FC6Siesta8Resource12loadIfNeededFS0_FT_GSqPS_7Request__">loadIfNeeded()</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Ensures that there is a load request in progress for this resource, unless the resource is already up to date.</p>

<p>If the resource is not up to date and there is no load request already in progress, this method calls <code>load()</code>.</p>

<ul>
<li>SeeAlso:

<ul>
<li><code>isUpToDate</code></li>
<li><code>load()</code></li>
</ul></li>
</ul>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="Swift">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">loadIfNeeded</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">Request</span><span class="p">?</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:FC6Siesta8Resource4loadFS0_FT_PS_7Request_"></a>
                    <a name="//apple_ref/swift/Method/load()" class="dashAnchor"></a>
                    <a class="token" href="#/s:FC6Siesta8Resource4loadFS0_FT_PS_7Request_">load()</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Initiates a GET request to update the state of this resource.</p>

<p>Sequence of events:</p>

<ol>
<li>This resource’s <code>loading</code> property becomes true, and remains true until the request either succeeds or fails.
Observers immedately receive <code>ResourceEvent.Requested</code>.</li>
<li>If the request is cancelled before completion, observers receive <code>ResourceEvent.RequestCancelled</code>.</li>
<li>If the server returns a success response, that goes in <code>latestData</code>, and <code>latestError</code> becomes nil.
Observers receive <code>ResourceEvent.NewData</code>.</li>
<li>If the server returns a 304, <code>latestData</code>’s timestamp is updated but the entity is otherwise untouched.
<code>latestError</code> becomes nil. Observers receive <code>ResourceEvent.NotModified</code>.</li>
<li>If the request fails for any reason, whether client-, server-, or network-related, observers receive
<code>ResourceEvent.Error</code>. Note that <code>latestData</code> does <em>not</em> become nil; the last valid response always sticks
around until another valid response arrives.</li>
</ol>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="Swift">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">load</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">Request</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:FC6Siesta8Resource4loadFS0_FT12usingRequestPS_7Request__PS1__"></a>
                    <a name="//apple_ref/swift/Method/load(usingRequest:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:FC6Siesta8Resource4loadFS0_FT12usingRequestPS_7Request__PS1__">load(usingRequest:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Updates the state of this resource using the result of the given request. Use this method when you want a request
to update <code>latestData</code> or <code>latestError</code> and notify observers just as <code>load()</code> would, but:</p>

<ul>
<li>you need to use a request method other than GET,</li>
<li>you need to set headers or other request options, but just for this one request (so that <code>Service.configure</code>
won’t work), or</li>
<li>for some arcane reason, you want a request for a <em>different</em> resource to update the state of this one.</li>
</ul>

<p>For example, an authentication resource might return its state only in response to a POST:</p>

<pre class="highlight plaintext"><code>let auth = MyAPI.authentication
auth.load(usingRequest:
  auth.request(
      .POST, json: ["user": user, "password": pass]))
</code></pre>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="Swift">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">load</span><span class="p">(</span><span class="n">usingRequest</span> <span class="nv">req</span><span class="p">:</span> <span class="kt">Request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Request</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:FC6Siesta8Resource22cancelLoadIfUnobservedFS0_FT_T_"></a>
                    <a name="//apple_ref/swift/Method/cancelLoadIfUnobserved()" class="dashAnchor"></a>
                    <a class="token" href="#/s:FC6Siesta8Resource22cancelLoadIfUnobservedFS0_FT_T_">cancelLoadIfUnobserved()</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>If this resource has no observers, cancels all <code>loadRequests</code>.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="Swift">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">cancelLoadIfUnobserved</span><span class="p">()</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:FC6Siesta8Resource22cancelLoadIfUnobservedFS0_FT10afterDelaySd8callbackFT_T__T_"></a>
                    <a name="//apple_ref/swift/Method/cancelLoadIfUnobserved(afterDelay:callback:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:FC6Siesta8Resource22cancelLoadIfUnobservedFS0_FT10afterDelaySd8callbackFT_T__T_">cancelLoadIfUnobserved(afterDelay:callback:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <pre class="highlight plaintext"><code>  Convenience to call `cancelLoadIfUnobserved()` after a delay. Useful for situations such as table view scrolling
</code></pre>

<p>where views are being rapidly discarded and recreated, and you no longer need the resource, but want to give other
views a chance to express interest in it before canceling any requests.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="Swift">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">cancelLoadIfUnobserved</span><span class="p">(</span><span class="n">afterDelay</span> <span class="nv">delay</span><span class="p">:</span> <span class="kt">NSTimeInterval</span><span class="p">,</span> <span class="nv">callback</span><span class="p">:</span> <span class="kt">Void</span> <span class="o">-&gt;</span> <span class="kt">Void</span> <span class="o">=</span> <span class="p">{})</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
                <div class="task-name-container">
                  <a name="/Local%20state%20changes"></a>
                  <a name="//apple_ref/swift/Section/Local state changes" class="dashAnchor"></a>
                  <a href="#/Local%20state%20changes">
                    <h3 class="section-name">Local state changes</h3>
                  </a>
                </div>
              <ul>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:FC6Siesta8Resource17localDataOverrideFS0_FVS_6EntityT_"></a>
                    <a name="//apple_ref/swift/Method/localDataOverride(_:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:FC6Siesta8Resource17localDataOverrideFS0_FVS_6EntityT_">localDataOverride(_:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Directly updates <code>latestData</code> without touching the network. Clears <code>latestError</code> and broadcasts
  <code>ResourceEvent.NewData</code> to observers.</p>

<p>This method is useful for incremental and optimistic updates.</p>

<p>You may send a request which does <em>not</em> return the complete state of the resource in the response body,
  but which still changes the state of the resource. You could handle this by initiating a refresh immedately
  after success:</p>

<pre class="highlight plaintext"><code>  resource.request(method: .POST, json: ["name": "Fred"])
    .success { _ in resource.load() }
</code></pre>

<p>However, if you already <em>know</em> the resulting state of the resource given a success response, you can avoid the
  second network call by updating the entity yourself:</p>

<pre class="highlight plaintext"><code>  resource.request(method: .POST, json: ["name": "Fred"])
    .success { partialEntity in

        // Make a mutable copy of the current content
        var updatedContent = resource.jsonDict

        // Do the incremental update
        updatedContent["name"] = parialEntity["newName"]

        // Make that the resource’s new entity
        resource.localContentOverride(updatedEntity)
    }
</code></pre>

<p>Use this technique with caution!</p>

<p>Note that the data you pass does <em>not</em> go through the standard <code>ResponseTransformer</code> chain. You should pass data
  as if it was already parsed, not in its raw form as the server would return it. For example, in the code above,
  <code>updatedContent</code> is a <code>Dictionary</code>, not <code>NSData</code> containing encoded JSON.</p>

<ul>
<li>SeeAlso: <code>localContentOverride(_:)</code></li>
</ul>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="Swift">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">localDataOverride</span><span class="p">(</span><span class="nv">entity</span><span class="p">:</span> <span class="kt">Entity</span><span class="p">)</span>
        <span class="p">{</span> <span class="nf">receiveNewData</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="nv">source</span><span class="p">:</span> <span class="o">.</span><span class="kt">LocalOverride</span><span class="p">)</span> <span class="p">}</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:FC6Siesta8Resource20localContentOverrideFS0_FPSs9AnyObject_T_"></a>
                    <a name="//apple_ref/swift/Method/localContentOverride(_:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:FC6Siesta8Resource20localContentOverrideFS0_FPSs9AnyObject_T_">localContentOverride(_:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Convenience method to replace the <code>content</code> of <code>latestData</code> without altering the content type or other headers.</p>

<p>If this resource has no content, this method sets the content type to <code>application/binary</code>.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="Swift">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">localContentOverride</span><span class="p">(</span><span class="nv">content</span><span class="p">:</span> <span class="kt">AnyObject</span><span class="p">)</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:FC6Siesta8Resource10invalidateFS0_FT_T_"></a>
                    <a name="//apple_ref/swift/Method/invalidate()" class="dashAnchor"></a>
                    <a class="token" href="#/s:FC6Siesta8Resource10invalidateFS0_FT_T_">invalidate()</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Forces the next call to <code>loadIfNeeded()</code> to trigger a request, even if the current content is fresh.
Leaves the current values of <code>latestData</code> and <code>latestError</code> intact (including their timestamps).</p>

<p>Use this if you know the current content is stale, but don’t want to trigger a network request right away.</p>

<p>Any update to <code>latestData</code> or <code>latestError</code> — including a call to <code>localDataOverride()</code> or
<code>localContentOverride()</code> — clears the invalidation.</p>

<ul>
<li>SeeAlso: <code>wipe()</code></li>
</ul>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="Swift">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">invalidate</span><span class="p">()</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:FC6Siesta8Resource4wipeFS0_FT_T_"></a>
                    <a name="//apple_ref/swift/Method/wipe()" class="dashAnchor"></a>
                    <a class="token" href="#/s:FC6Siesta8Resource4wipeFS0_FT_T_">wipe()</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Resets this resource to its pristine state, as if newly created.</p>

<ul>
<li>Sets <code>latestData</code> to nil.</li>
<li>Sets <code>latestError</code> to nil.</li>
<li>Cancels all resource requests in progress.</li>
</ul>

<p>Observers receive a <code>NewData</code> event. Requests in progress call completion hooks with a cancellation error.</p>

<ul>
<li>SeeAlso: <code>invalidate()</code></li>
</ul>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="Swift">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">wipe</span><span class="p">()</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
              <ul>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:vC6Siesta8Resource30entityForTypedContentAccessorsGSqVS_6Entity_"></a>
                    <a name="//apple_ref/swift/Property/entityForTypedContentAccessors" class="dashAnchor"></a>
                    <a class="token" href="#/s:vC6Siesta8Resource30entityForTypedContentAccessorsGSqVS_6Entity_">entityForTypedContentAccessors</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Typed content accessors such as <code>.text</code> and <code>.jsonDict</code> apply to <code>latestData?.content</code>.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="Swift">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="k">var</span> <span class="nv">entityForTypedContentAccessors</span><span class="p">:</span> <span class="kt">Entity</span><span class="p">?</span> <span class="p">{</span> <span class="k">return</span> <span class="n">latestData</span> <span class="p">}</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
          </section>
        </section>
        <section id="footer">
          <p>&copy; 2015 <a class="link" href="http://bustoutsolutions.com" target="_blank" rel="external">Bust Out Solutions</a> under <a href="https://github.com/bustoutsolutions/siesta/blob/master/LICENSE">open source license</a>. (Last updated: 2015-09-10)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.2.4</a>, a <a class="link" href="http://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
